# ========================================
# SERVER CONFIGURATION
# ========================================
PORT=5000
NODE_ENV=development
BACKEND_URL=http://localhost:5000
FRONTEND_URL=http://localhost:3000

# ========================================
# DATABASE CONFIGURATION
# ========================================
# MongoDB Configuration
MONGODB_URI=mongodb://localhost:27017/9tangle

# Alternative: MongoDB Atlas (Cloud)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/database_name?retryWrites=true&w=majority

# PostgreSQL Configuration
DB_NAME=9tangle
DB_USER=postgres
DB_PASSWORD=postgres
DB_HOST=localhost
DB_PORT=5432
DB_ENABLED=true

# ========================================
# JWT AUTHENTICATION
# ========================================
# Generate a secure random string (minimum 32 characters)
# You can use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_change_in_production
JWT_EXPIRES_IN=7d

# ========================================
# EMAIL CONFIGURATION (REQUIRED FOR PRODUCTION)
# ========================================

# ----- OPTION 1: Gmail SMTP (Easiest for Testing) -----
# 1. Enable 2-Factor Authentication on your Gmail account
# 2. Generate an App Password: https://myaccount.google.com/apppasswords
# 3. Use the app password (not your regular Gmail password)

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_specific_password
EMAIL_FROM=noreply@9tangle.com

# ----- OPTION 2: SendGrid (Recommended for Production) -----
# 1. Sign up at https://sendgrid.com
# 2. Create an API key with Mail Send permissions
# 3. Uncomment and configure below:

# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=apikey
# EMAIL_PASSWORD=your_sendgrid_api_key
# EMAIL_FROM=noreply@9tangle.com

# ----- OPTION 3: Amazon SES (AWS) -----
# 1. Verify your domain in AWS SES
# 2. Create SMTP credentials
# 3. Uncomment and configure below:

# EMAIL_HOST=email-smtp.us-east-1.amazonaws.com
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=your_smtp_username
# EMAIL_PASSWORD=your_smtp_password
# EMAIL_FROM=noreply@9tangle.com

# ----- OPTION 4: Mailgun -----
# 1. Sign up at https://www.mailgun.com
# 2. Get SMTP credentials from your dashboard
# 3. Uncomment and configure below:

# EMAIL_HOST=smtp.mailgun.org
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=postmaster@yourdomain.mailgun.org
# EMAIL_PASSWORD=your_mailgun_password
# EMAIL_FROM=noreply@9tangle.com

# ----- OPTION 5: Custom SMTP Server -----
# Configure your own SMTP server details:

# EMAIL_HOST=mail.yourdomain.com
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=noreply@yourdomain.com
# EMAIL_PASSWORD=your_smtp_password
# EMAIL_FROM=noreply@9tangle.com

# ========================================
# EMAIL SECURITY & DELIVERABILITY
# ========================================

# For production, you MUST configure these DNS records:
# 
# 1. SPF Record (TXT):
#    v=spf1 include:_spf.google.com include:sendgrid.net ~all
#    (Adjust based on your email provider)
#
# 2. DKIM Record (TXT):
#    Provided by your email service (Gmail, SendGrid, etc.)
#    Usually looks like: k=rsa; p=MIGfMA0GCSqGSIb3...
#
# 3. DMARC Record (TXT):
#    v=DMARC1; p=quarantine; rua=mailto:dmarc@yourdomain.com
#
# These records prevent your emails from being marked as spam
# and protect against email spoofing.

# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================
# Maximum file size for uploads (in bytes)
# 500MB = 524288000 bytes
MAX_FILE_SIZE=524288000

# Allowed file types for course materials
ALLOWED_FILE_TYPES=.pdf,.doc,.docx,.ppt,.pptx,.jpg,.jpeg,.png

# ========================================
# CORS CONFIGURATION
# ========================================
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# ========================================
# RATE LIMITING (Security)
# ========================================
# These are configured in the routes but can be customized
# Default values:
# - Registration: 3 attempts per hour per IP
# - Login: 5 attempts per 15 minutes per IP
# - Password Reset: 3 attempts per hour per IP
# - Verification Code: 5 attempts per hour per IP
# - Resend Code: 3 attempts per hour per IP

# ========================================
# DEVELOPMENT ONLY (Remove in Production)
# ========================================
# If EMAIL_USER and EMAIL_PASSWORD are not set in development,
# the system will use Ethereal Email (fake SMTP for testing)
# View test emails at: https://ethereal.email

# ========================================
# ADMIN SETUP
# ========================================
# Initial admin credentials (used by seedAdmin.js script)
ADMIN_NAME=Admin User
ADMIN_EMAIL=admin@9tangle.com
ADMIN_PASSWORD=Admin@123456

# ========================================
# LOGS & MONITORING
# ========================================
# Email audit logs are automatically saved to backend/logs/email-audit.log
# Logs are kept for 90 days by default

# ========================================
# PRODUCTION CHECKLIST
# ========================================
# Before deploying to production, ensure:
# ✓ Change JWT_SECRET to a secure random string
# ✓ Set NODE_ENV=production
# ✓ Configure a production email service (SendGrid, SES, etc.)
# ✓ Set up SPF, DKIM, and DMARC DNS records
# ✓ Use HTTPS (set BACKEND_URL and FRONTEND_URL to https://)
# ✓ Update CORS_ORIGIN with your production domain
# ✓ Change default ADMIN_PASSWORD
# ✓ Set up MongoDB with authentication
# ✓ Enable MongoDB Atlas IP whitelist if using cloud
# ✓ Set up proper error logging (e.g., Sentry)
# ✓ Configure backups for your database
# ✓ Set up SSL certificates
# ✓ Review and adjust rate limiting values

